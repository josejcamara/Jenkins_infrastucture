---
driver:
  name: vagrant
  customize:
    memory: 2048
    cpuexecutioncap: 50
    # createhd:
    #   - filename: /tmp/jenkins-disk1.vmdk
    #     size: 1024
  synced_folders:
    - ["data/jenkins-master", "/var/jenkins"]

## The forwarded_port port feature lets you connect to ports on the VM guest via
## localhost on the host.
## see also: https://www.vagrantup.com/docs/networking/forwarded_ports.html
network:
   - ["forwarded_port", {guest: 80, host: 8080}]


# provisioner:
#   name: chef_zero
#   always_update_cookbooks: true
#   # Add these 2 lines:
#   client_rb:
#     chef_license: accept

provisioner:
  # chef_zero enables you to mimic a Chef server environment on your local machine.
  name: chef_zero

  # You may wish to disable always updating cookbooks in CI or other testing environments.
  #   always_update_cookbooks: <%= !ENV['CI'] %>

  ## product_name and product_version specifies a specific Chef product and version to install.
  ## for more details: https://docs.chef.io/config_yml_kitchen.html
  #  product_name: chef
  #  product_version: 15

verifier:
  name: inspec

platforms:
  - name: ubuntu-18.04
    driver:
      gui: true
  # - name: centos-7

suites:
  - name: default
    run_list:
      - recipe[jenkins-master::default]
    verifier:
      inspec_tests:
        - test/integration/default
    attributes:
